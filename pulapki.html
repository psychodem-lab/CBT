<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Narzƒôdzie Pracy ze Zniekszta≈Çceniami Poznawczymi (CBT)</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --bg-color: #f3f4f6;
            --card-bg: #ffffff;
            --text-main: #1f2937;
            --text-light: #6b7280;
            --border-color: #e5e7eb;
            --success-color: #10b981;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        h1, h2, h3 {
            color: var(--text-main);
            margin-top: 0;
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
        }

        .step {
            font-weight: 600;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .step.active {
            color: var(--primary-color);
        }

        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background-color 0.2s;
            display: block;
            width: 100%;
            margin-top: 20px;
        }

        .btn:hover {
            background-color: var(--secondary-color);
        }

        .btn:disabled {
            background-color: var(--text-light);
            cursor: not-allowed;
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background-color: #eff6ff;
            color: var(--secondary-color);
        }

        /* Sekcja wyboru (Checkboxy) */
        .distortion-item {
            border: 1px solid var(--border-color);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .distortion-item:hover {
            border-color: var(--primary-color);
            background-color: #eff6ff;
        }

        .distortion-label {
            display: flex;
            align-items: flex-start;
            cursor: pointer;
        }

        .distortion-label input {
            margin-top: 6px;
            margin-right: 12px;
            transform: scale(1.2);
        }

        .distortion-content h3 {
            margin: 0 0 5px 0;
            font-size: 1.1rem;
        }

        .distortion-desc {
            font-size: 0.95rem;
            color: var(--text-main);
        }

        .distortion-example {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: 5px;
            font-style: italic;
            background: #f9fafb;
            padding: 8px;
            border-radius: 4px;
        }

        /* Sekcja Oceny (Suwaki) */
        .rating-item {
            margin-bottom: 25px;
            padding: 20px;
            background: #f9fafb;
            border-radius: 8px;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
        }

        input[type=range] {
            flex-grow: 1;
            cursor: pointer;
        }

        .score-display {
            font-weight: bold;
            color: var(--primary-color);
            font-size: 1.2rem;
            width: 30px;
            text-align: center;
        }

        /* Sekcja Pracy (Interwencja) */
        .intervention-card {
            background: #f0f9ff;
            border-left: 5px solid var(--primary-color);
            padding: 20px;
            margin-bottom: 25px;
        }

        .socratic-section {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            margin-top: 20px;
        }

        .socratic-questions ul {
            padding-left: 20px;
        }
        
        .socratic-questions li {
            margin-bottom: 8px;
            color: var(--text-main);
        }

        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-family: inherit;
            margin-top: 10px;
            resize: vertical;
            min-height: 100px;
            box-sizing: border-box;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .hidden {
            display: none;
        }

        .summary-box {
            background-color: #ecfdf5;
            border: 1px solid #a7f3d0;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        /* STYLE DO DRUKU / PDF */
        @media print {
            body {
                background-color: white;
                padding: 0;
            }
            .container {
                box-shadow: none;
                margin: 0;
                padding: 0;
                width: 100%;
                max-width: 100%;
            }
            .step-indicator, .btn, .hidden {
                display: none !important;
            }
            h1 {
                font-size: 1.5rem;
                text-align: left;
                color: black;
            }
            .summary-box {
                border: 1px solid #000;
                background-color: white;
            }
            .intervention-card {
                border-left: 1px solid #000;
                background-color: white;
            }
            /* Wymuszamy pokazanie widoku podsumowania podczas druku, je≈õli u≈ºytkownik jest na tym etapie */
            #view-5 {
                display: block !important;
            }
            p, li {
                color: black;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Analiza Zniekszta≈Çce≈Ñ Poznawczych</h1>
    
    <div class="step-indicator">
        <span id="ind-1" class="step active">1. Wyb√≥r</span>
        <span id="ind-2" class="step">2. Ocena</span>
        <span id="ind-3" class="step">3. Priorytet</span>
        <span id="ind-4" class="step">4. Praca</span>
    </div>

    <div id="view-1">
        <p>Zaznacz zniekszta≈Çcenia, kt√≥re rozpoznajesz u siebie w wysokim stopniu.</p>
        <div id="distortions-list">
            </div>
        <button onclick="goToRating()" class="btn">Dalej: Oce≈Ñ czƒôstotliwo≈õƒá</button>
    </div>

    <div id="view-2" class="hidden">
        <p>Oce≈Ñ w skali 0-10, jak czƒôsto wpadasz w te pu≈Çapki my≈õlowe (0 - nigdy, 10 - bardzo czƒôsto).</p>
        <div id="ratings-list">
            </div>
        <button onclick="goToPriority()" class="btn">Dalej: Wybierz priorytet</button>
        <button onclick="goBack(1)" class="btn" style="background-color: #9ca3af; margin-top: 10px;">Wr√≥ƒá</button>
    </div>

    <div id="view-3" class="hidden">
        <p>Nad kt√≥rym zniekszta≈Çceniem chcesz popracowaƒá teraz?</p>
        <div id="priority-list">
            </div>
        <button onclick="goToWork()" class="btn">Rozpocznij pracƒô</button>
        <button onclick="goBack(2)" class="btn" style="background-color: #9ca3af; margin-top: 10px;">Wr√≥ƒá</button>
    </div>

    <div id="view-4" class="hidden">
        <div id="work-area">
            </div>
        
        <div class="socratic-section">
            <h3>Twoja alternatywna my≈õl</h3>
            <p>BazujƒÖc na powy≈ºszych pytaniach i faktach, spr√≥buj sformu≈Çowaƒá nowƒÖ, bardziej realistycznƒÖ my≈õl (tzw. racjonalnƒÖ ripostƒô).</p>
            <textarea id="rational-response" placeholder="Np. To, ≈ºe pope≈Çni≈Çem jeden b≈ÇƒÖd, nie oznacza, ≈ºe jestem do niczego. Jestem cz≈Çowiekiem, kt√≥ry siƒô uczy."></textarea>
            <button onclick="finishSession()" class="btn" style="background-color: var(--success-color)">Zako≈Ñcz sesjƒô</button>
        </div>
        <button onclick="goBack(3)" class="btn" style="background-color: #9ca3af; margin-top: 10px;">Wr√≥ƒá do wyboru</button>
    </div>

    <div id="view-5" class="hidden">
        <h2>Raport z sesji (Restrukturyzacja poznawcza)</h2>
        <p id="print-date" style="font-size: 0.9rem; color: #666;"></p>
        
        <div class="summary-box">
            <h3>Pracowa≈Çe≈õ nad: <span id="summary-distortion-name"></span></h3>
            <p><strong>Twoja nowa, zdrowa my≈õl:</strong></p>
            <p id="summary-response" style="font-size: 1.1rem; font-style: italic; white-space: pre-wrap;"></p>
        </div>
        
        <div class="intervention-card" style="margin-top: 20px;">
            <h4>Definicja problemu (Przypomnienie):</h4>
            <p id="summary-distortion-desc"></p>
        </div>

        <p>Warto wracaƒá do tego zapisu, gdy zniekszta≈Çcenie pojawi siƒô ponownie.</p>
        
        <button onclick="printReport()" class="btn btn-outline" style="margin-bottom: 10px;">üñ®Ô∏è Zapisz do PDF / Drukuj</button>
        <button onclick="location.reload()" class="btn">Zacznij od nowa</button>
    </div>

</div>

<script>
    // Baza danych zniekszta≈Çce≈Ñ (oparta na D. Burns / A. Beck)
    const distortionsData = [
        {
            id: 'all-or-nothing',
            name: 'My≈õlenie w kategoriach "wszystko albo nic"',
            desc: 'Widzisz sytuacjƒô w kategoriach czarno-bia≈Çych. Je≈õli twoje osiƒÖgniƒôcie nie jest idealne, postrzegasz je jako ca≈ÇkowitƒÖ pora≈ºkƒô.',
            example: '‚ÄûDosta≈Çem czw√≥rkƒô z egzaminu, jestem totalnym nieudacznikiem.‚Äù',
            questions: [
                'Czy w rzeczywisto≈õci istniejƒÖ tylko dwie skrajno≈õci (sukces/pora≈ºka), czy mo≈ºe jest skala szaro≈õci?',
                'Czy jakikolwiek wynik poni≈ºej 100% naprawdƒô oznacza 0%?',
                'Jak oceni≈Çby≈õ tƒô sytuacjƒô, gdyby dotyczy≈Ça innej osoby?'
            ]
        },
        {
            id: 'overgeneralization',
            name: 'Nadmierne uog√≥lnianie',
            desc: 'Postrzegasz pojedyncze negatywne wydarzenie jako nieko≈ÑczƒÖce siƒô pasmo pora≈ºek. U≈ºywasz s≈Ç√≥w: ‚Äûzawsze‚Äù, ‚Äûnigdy‚Äù.',
            example: '‚ÄûOdm√≥wi≈Ça mi randki. Zawsze bƒôdƒô sam i nikt mnie nigdy nie zechce.‚Äù',
            questions: [
                'Jakie sƒÖ dowody na to, ≈ºe to jedno wydarzenie determinuje ca≈ÇƒÖ przysz≈Ço≈õƒá?',
                'Czy zdarzy≈Ço siƒô kiedy≈õ, ≈ºe sytuacja potoczy≈Ça siƒô inaczej?',
                'Czy generalizowanie pomaga mi rozwiƒÖzaƒá problem, czy tylko pogarsza nastr√≥j?'
            ]
        },
        {
            id: 'mental-filter',
            name: 'Filtr mentalny',
            desc: 'Wybierasz jeden negatywny szczeg√≥≈Ç i skupiasz siƒô na nim tak bardzo, ≈ºe twoja wizja ca≈Çej rzeczywisto≈õci staje siƒô ciemna (jak kropla atramentu w dzbanie wody).',
            example: 'Wyg≈Çosi≈Çe≈õ ≈õwietnƒÖ prezentacjƒô, ale jedna osoba wysz≈Ça w trakcie. My≈õlisz tylko o tej jednej osobie, ignorujƒÖc brawa reszty.',
            questions: [
                'Co ignorujƒô w tej sytuacji, co mog≈Çoby byƒá pozytywne lub neutralne?',
                'Czy gdybym patrzy≈Ç na to z boku, widzia≈Çbym pe≈Çniejszy obraz?',
                'Czy ta jedna negatywna rzecz naprawdƒô przekre≈õla wszystko inne?'
            ]
        },
        {
            id: 'disqualifying-positive',
            name: 'Dyskwalifikowanie pozytyw√≥w',
            desc: 'Odrzucasz pozytywne do≈õwiadczenia, twierdzƒÖc, ≈ºe siƒô ‚Äûnie liczƒÖ‚Äù z tego czy innego powodu. Utrzymujesz negatywne przekonanie wbrew faktom.',
            example: '‚ÄûPochwalili mnie, ale tylko dlatego, ≈ºe chcieli byƒá mili. To siƒô nie liczy.‚Äù',
            questions: [
                'Dlaczego odrzucam ten pozytywny dow√≥d?',
                'Jakie fakty obiektywnie wspierajƒÖ to pozytywne wydarzenie?',
                'Czy przyjƒÖ≈Çbym takƒÖ argumentacjƒô od przyjaciela?'
            ]
        },
        {
            id: 'jumping-conclusions',
            name: 'Wnioskowanie pochopne (Czytanie w my≈õlach)',
            desc: 'Zak≈Çadasz, ≈ºe kto≈õ reaguje na ciebie negatywnie, nie sprawdzajƒÖc tego.',
            example: '‚ÄûPrzesz≈Ça obok i siƒô nie przywita≈Ça. Na pewno mnie nie lubi.‚Äù',
            questions: [
                'Jakie mam konkretne dowody na to, co ta osoba my≈õli?',
                'Czy mo≈ºe istnieƒá inne wyt≈Çumaczenie jej zachowania (np. by≈Ça zamy≈õlona, nie zauwa≈ºy≈Ça mnie)?',
                'Czy nie przypisujƒô innym w≈Çasnych lƒôk√≥w?'
            ]
        },
        {
            id: 'fortune-telling',
            name: 'Wnioskowanie pochopne (Przewidywanie przysz≈Ço≈õci)',
            desc: 'Przewidujesz, ≈ºe sprawy potoczƒÖ siƒô ≈∫le, i traktujesz to przewidywanie jak fakt.',
            example: '‚ÄûNa pewno oblejƒô ten egzamin.‚Äù, ‚ÄûTa impreza bƒôdzie katastrofƒÖ.‚Äù',
            questions: [
                'Czy jestem jasnowidzem? SkƒÖd wiem na 100%, co siƒô wydarzy?',
                'Ile razy moje czarne scenariusze siƒô nie sprawdzi≈Çy?',
                'Co mogƒô zrobiƒá, aby wp≈ÇynƒÖƒá na wynik, zamiast tylko go przewidywaƒá?'
            ]
        },
        {
            id: 'magnification',
            name: 'Wyzolbrzymianie (Katastrofizacja) lub Umniejszanie',
            desc: 'Przesadnie wyolbrzymiasz znaczenie swoich b≈Çƒôd√≥w lub umniejszasz swoje zalety.',
            example: '‚ÄûZrobi≈Çem liter√≥wkƒô w mailu, to koniec mojej kariery!‚Äù',
            questions: [
                'Czy za tydzie≈Ñ, miesiƒÖc lub rok to wydarzenie bƒôdzie mia≈Ço takie samo znaczenie?',
                'Czy patrzƒô na to przez lornetkƒô, kt√≥ra powiƒôksza problemy a pomniejsza zasoby?',
                'Co jest najgorszym, co realnie mo≈ºe siƒô staƒá, i jak bym sobie z tym poradzi≈Ç?'
            ]
        },
        {
            id: 'emotional-reasoning',
            name: 'Uzasadnianie emocjonalne',
            desc: 'Zak≈Çadasz, ≈ºe twoje negatywne emocje odzwierciedlajƒÖ rzeczywisto≈õƒá.',
            example: '‚ÄûCzujƒô siƒô g≈Çupi, wiƒôc muszƒô byƒá g≈Çupi.‚Äù, ‚ÄûCzujƒô lƒôk, wiƒôc sytuacja musi byƒá niebezpieczna.‚Äù',
            questions: [
                'Czy uczucia to fakty?',
                'Czy mogƒô czuƒá siƒô w pewien spos√≥b, a rzeczywisto≈õƒá mo≈ºe byƒá inna?',
                'Czy moje emocje nie wynikajƒÖ z moich my≈õli, a nie z fakt√≥w?'
            ]
        },
        {
            id: 'should-statements',
            name: 'Nadu≈ºywanie "muszƒô" i "powinienem"',
            desc: 'Pr√≥bujesz zmotywowaƒá siƒô, u≈ºywajƒÖc s≈Ç√≥w ‚Äûpowinienem‚Äù lub ‚Äûmuszƒô‚Äù, co prowadzi do poczucia winy, gdy nie spe≈Çniasz oczekiwa≈Ñ.',
            example: '‚ÄûPowinienem by≈Ç to zrobiƒá lepiej.‚Äù, ‚ÄûOn musi mnie szanowaƒá.‚Äù',
            questions: [
                'Kto ustali≈Ç tƒô zasadƒô?',
                'Czy to "powinienem" pomaga mi, czy tylko wpƒôdza w poczucie winy?',
                'Czy mogƒô zamieniƒá "muszƒô" na "chcia≈Çbym" lub "wole"? (np. Wola≈Çbym to zrobiƒá lepiej).'
            ]
        },
        {
            id: 'labeling',
            name: 'Etykietowanie',
            desc: 'Skrajna forma uog√≥lniania. Zamiast opisaƒá b≈ÇƒÖd, przyklejasz sobie lub innym negatywnƒÖ etykietƒô.',
            example: 'Zamiast ‚Äûpope≈Çni≈Çem b≈ÇƒÖd‚Äù, my≈õlisz ‚Äûjestem idiotƒÖ‚Äù. Zamiast ‚Äûzachowa≈Ç siƒô ≈∫le‚Äù, my≈õlisz ‚Äûon jest ≈Çajdakiem‚Äù.',
            questions: [
                'Czy jedna cecha lub zachowanie definiuje ca≈Çego cz≈Çowieka?',
                'Czy etykieta "idiota" jest faktem, czy opiniƒÖ nacechowanƒÖ emocjonalnie?',
                'Jakie mam dowody na to, ≈ºe ta etykieta jest w 100% prawdziwa?'
            ]
        },
        {
            id: 'personalization',
            name: 'Personalizacja',
            desc: 'Bierzesz na siebie odpowiedzialno≈õƒá za zdarzenia, na kt√≥re nie masz pe≈Çnego wp≈Çywu.',
            example: '‚ÄûDziecko dosta≈Ço z≈ÇƒÖ ocenƒô, to dow√≥d na to, ≈ºe jestem z≈ÇƒÖ matkƒÖ.‚Äù',
            questions: [
                'Czy ja naprawdƒô kontrolujƒô wszystko w tej sytuacji?',
                'Czy nie biorƒô na siebie odpowiedzialno≈õci za czyje≈õ wybory lub losowe zdarzenia?',
                'Jakie inne czynniki mog≈Çy wp≈ÇynƒÖƒá na ten wynik?'
            ]
        }
    ];

    // Stan aplikacji
    let state = {
        selectedIds: [],
        ratings: {},
        currentWorkId: null
    };

    // Inicjalizacja listy w kroku 1
    function initDistortionsList() {
        const container = document.getElementById('distortions-list');
        container.innerHTML = '';
        
        distortionsData.forEach(dist => {
            const div = document.createElement('div');
            div.className = 'distortion-item';
            div.innerHTML = `
                <label class="distortion-label">
                    <input type="checkbox" value="${dist.id}" onchange="handleSelection(this)">
                    <div class="distortion-content">
                        <h3>${dist.name}</h3>
                        <div class="distortion-desc">${dist.desc}</div>
                        <div class="distortion-example">Przyk≈Çad: ${dist.example}</div>
                    </div>
                </label>
            `;
            container.appendChild(div);
        });
    }

    // Obs≈Çuga wyboru checkbox√≥w
    function handleSelection(checkbox) {
        if (checkbox.checked) {
            state.selectedIds.push(checkbox.value);
        } else {
            state.selectedIds = state.selectedIds.filter(id => id !== checkbox.value);
        }
    }

    // Przej≈õcie do kroku 2 (Ocena)
    function goToRating() {
        if (state.selectedIds.length === 0) {
            alert('Wybierz przynajmniej jedno zniekszta≈Çcenie.');
            return;
        }

        const container = document.getElementById('ratings-list');
        container.innerHTML = '';

        state.selectedIds.forEach(id => {
            const dist = distortionsData.find(d => d.id === id);
            const div = document.createElement('div');
            div.className = 'rating-item';
            div.innerHTML = `
                <h3>${dist.name}</h3>
                <div class="slider-container">
                    <span>0</span>
                    <input type="range" min="0" max="10" value="5" oninput="updateRating('${id}', this.value)">
                    <span>10</span>
                    <span class="score-display" id="score-${id}">5</span>
                </div>
            `;
            container.appendChild(div);
            // Domy≈õlna ocena
            state.ratings[id] = 5; 
        });

        switchView(2);
    }

    // Aktualizacja oceny w stanie
    function updateRating(id, value) {
        state.ratings[id] = parseInt(value);
        document.getElementById(`score-${id}`).innerText = value;
    }

    // Przej≈õcie do kroku 3 (Priorytet)
    function goToPriority() {
        const container = document.getElementById('priority-list');
        container.innerHTML = '';

        // Sortowanie wg oceny (malejƒÖco)
        const sortedIds = state.selectedIds.sort((a, b) => state.ratings[b] - state.ratings[a]);

        sortedIds.forEach((id, index) => {
            const dist = distortionsData.find(d => d.id === id);
            const score = state.ratings[id];
            
            const div = document.createElement('div');
            div.className = 'distortion-item';
            div.innerHTML = `
                <label class="distortion-label">
                    <input type="radio" name="priority" value="${id}" ${index === 0 ? 'checked' : ''}>
                    <div class="distortion-content">
                        <h3>${dist.name} <span style="font-size:0.8em; color:var(--primary-color)">(Ocena: ${score}/10)</span></h3>
                        <div class="distortion-desc">${dist.desc}</div>
                    </div>
                </label>
            `;
            container.appendChild(div);
        });

        switchView(3);
    }

    // Przej≈õcie do kroku 4 (Praca)
    function goToWork() {
        const radios = document.getElementsByName('priority');
        let selected = null;
        for (let r of radios) {
            if (r.checked) {
                selected = r.value;
                break;
            }
        }

        if (!selected) {
            alert('Wybierz zniekszta≈Çcenie do pracy.');
            return;
        }

        state.currentWorkId = selected;
        renderWorkView(selected);
        switchView(4);
    }

    // Renderowanie widoku pracy
    function renderWorkView(id) {
        const dist = distortionsData.find(d => d.id === id);
        const workArea = document.getElementById('work-area');
        
        let questionsHtml = '<ul class="socratic-questions">';
        dist.questions.forEach(q => {
            questionsHtml += `<li><strong>${q}</strong></li>`;
        });
        questionsHtml += '</ul>';

        workArea.innerHTML = `
            <div class="intervention-card">
                <h2>Pracujesz nad: ${dist.name}</h2>
                <p><strong>Definicja:</strong> ${dist.desc}</p>
                <p><strong>Przyk≈Çad:</strong> ${dist.example}</p>
            </div>

            <div class="socratic-section">
                <h3>Analiza fakt√≥w i pytania pomocnicze (Sokratejskie)</h3>
                <p>Przeczytaj poni≈ºsze pytania i zastan√≥w siƒô nad odpowiedziƒÖ w kontek≈õcie swojej sytuacji:</p>
                ${questionsHtml}
            </div>
        `;
    }

    function finishSession() {
        const response = document.getElementById('rational-response').value;
        if (!response.trim()) {
            alert("Spr√≥buj wpisaƒá chocia≈º jedno zdanie alternatywnej my≈õli.");
            return;
        }

        const dist = distortionsData.find(d => d.id === state.currentWorkId);
        
        // Wype≈Çnienie danych do podsumowania
        document.getElementById('summary-distortion-name').innerText = dist.name;
        document.getElementById('summary-distortion-desc').innerText = dist.desc;
        document.getElementById('summary-response').innerText = response;
        
        const now = new Date();
        document.getElementById('print-date').innerText = 'Data: ' + now.toLocaleString('pl-PL');

        // Ukrycie wszystkich widok√≥w i pokazanie podsumowania
        document.getElementById('view-4').classList.add('hidden');
        document.getElementById('ind-4').classList.remove('active');
        document.getElementById('view-5').classList.remove('hidden');
    }

    function printReport() {
        window.print();
    }

    // Funkcja nawigacji miƒôdzy widokami
    function switchView(stepNumber) {
        // Ukryj wszystko
        document.querySelectorAll('[id^="view-"]').forEach(el => el.classList.add('hidden'));
        
        // Poka≈º aktualny
        document.getElementById(`view-${stepNumber}`).classList.remove('hidden');

        // Aktualizuj wska≈∫nik
        document.querySelectorAll('.step').forEach((el, index) => {
            if (index + 1 <= stepNumber) {
                el.classList.add('active');
            } else {
                el.classList.remove('active');
            }
        });
    }

    function goBack(toStep) {
        switchView(toStep);
    }

    // Start
    initDistortionsList();

</script>

</body>
</html>
